(this["webpackJsonpversa-time"]=this["webpackJsonpversa-time"]||[]).push([[12],{159:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return R}));var a=n(1),r=n(174),s=n.n(r),o=n(131),i=n(248),c=n(155),l=(n(166),n(165),n(0),n(276)),u=n(252),d=n(253),p=n(254),b=n(184),h=n.n(b),j=(n(281),function(e){return Object(a.jsx)(c.a,{style:{padding:7},color:"primary",variant:"contained",onClick:e.onClick,children:"Download Packing Slips"})}),f=function(e){return Object(a.jsx)(c.a,{style:{padding:7},color:"primary",variant:"contained",onClick:e.onClick,children:"Update Packing Slips"})},m=function(e){return Object(a.jsx)(c.a,{style:{marginBottom:30,width:"100%",padding:"15px 0px 15px 0px"},color:"primary",variant:"contained",onClick:e.onClick,children:e.children})},x=function(e){return Object(a.jsx)(i.a,{title:e.title,placement:"top",children:Object(a.jsx)(o.a,{onClick:e.onClick,size:"small",children:Object(a.jsx)(s.a,{color:"primary",fontSize:"large"})})})},g=function(e){return Object(a.jsx)(i.a,{title:"Edit",placement:"top",children:Object(a.jsx)(o.a,{onClick:e.onClick,className:e.className,children:Object(a.jsx)(h.a,{color:e.color})})})},O=function(e){return Object(a.jsx)(u.a,{component:"fieldset",children:Object(a.jsxs)(d.a,{row:!0,children:[Object(a.jsx)(p.a,{control:Object(a.jsx)(l.a,{checked:null!==e.passed&&!1!==e.passed?e.passed:null,style:{color:"green"},onChange:function(){e.onChange(e.i,!0)}}),label:"Passed"}),Object(a.jsx)(p.a,{control:Object(a.jsx)(l.a,{checked:!1===e.passed||null,style:{color:"red"},onChange:function(){e.onChange(e.i,!1)}}),label:"Failed"})]})})},v=function(e){return Object(a.jsx)(c.a,{onClick:e.onClick,color:"primary",children:"Save Changes"})},R=function(e){return Object(a.jsxs)("div",{style:{marginLeft:"auto"},children:[Object(a.jsx)("input",{type:"file",style:{display:"none"},name:"upload-file",id:"upload-file",value:e.file,onChange:e.uploadFile,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Object(a.jsx)("label",{htmlFor:"upload-file",children:Object(a.jsx)(c.a,{variant:"contained",color:"primary",onClick:e.onChange,children:"Upload File"})})]})}},161:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"k",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"o",(function(){return b})),n.d(t,"q",(function(){return h})),n.d(t,"f",(function(){return j})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"s",(function(){return x})),n.d(t,"h",(function(){return g})),n.d(t,"e",(function(){return O})),n.d(t,"l",(function(){return v})),n.d(t,"n",(function(){return R})),n.d(t,"i",(function(){return C})),n.d(t,"m",(function(){return M})),n.d(t,"r",(function(){return N})),n.d(t,"j",(function(){return I})),n.d(t,"p",(function(){return S})),n.d(t,"b",(function(){return w}));var a=n(1),r=n(17),s=n(285),o=n(275),i=n(61),c=(n(255),n(282),n(158),n(271),n(0),Object(i.a)((function(){return{textFieldRoot:{fontSize:18,"& .Mui-disabled":{color:"black"},width:275},identifierRoot:{fontSize:20,"& .Mui-disabled":{color:"black"},height:"auto",width:"100%"},multilineRoot:{fontSize:18,"& .Mui-disabled":{color:"black"},width:275},fullWidth:{flexGrow:0},noteWidth:{width:275,height:"100%"},labelIdRoot:{fontSize:20},labelRoot:{fontSize:20},labelFocused:{}}}))),l=function(e,t,n){var a;return a=e?Object(r.a)(Object(r.a)({},e.InputProps),{},{classes:{root:t.textFieldRoot}}):{classes:{root:t.textFieldRoot}},n.edit||(a.disableUnderline=!0),a},u=function(e){var t=c();return Object(a.jsx)(o.a,{id:"customer",options:e.customers,getOptionLabel:function(e){return e.customerName},disabled:!e.edit,onChange:e.onChange,value:e.value,freeSolo:!0,className:t.fullWidth,renderInput:function(n){return Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},n),{},{label:"Customer",variant:e.edit?"outlined":"standard",InputProps:l(n,t,e),InputLabelProps:Object(r.a)(Object(r.a)({},n.InputLabelProps),{},{classes:{root:t.labelRoot},shrink:!0})}))}})},d=function(e){var t=c();return Object(a.jsx)(o.a,{id:"product",options:e.products,getOptionLabel:function(e){return e.productName},disabled:!e.edit,onChange:e.onChange,value:e.value,freeSolo:!0,className:t.fullWidth,renderInput:function(n){return Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({},n),{},{label:"Product",variant:e.edit?"outlined":"standard",InputProps:l(n,t,e),InputLabelProps:Object(r.a)(Object(r.a)({},n.InputLabelProps),{},{classes:{root:t.labelRoot},shrink:!0})}))}})},p=function(e){var t=c(),n=e.label?e.label:"Expr Date",r=new Date;return Object(a.jsx)(s.a,{id:"date",label:n,type:"date",defaultValue:"yyyy-MM-dd",variant:e.edit?"outlined":"standard",value:e.value?e.value.toISOString().substring(0,10):r.toISOString().substring(0,10),disabled:!e.edit,className:t.fullWidth,InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},onChange:e.onChange})},b=function(e){var t=c();return Object(a.jsx)(s.a,{id:"customer-ship-to",label:"Ship To",multiline:!0,rows:4,className:t.fullWidth,rowsMax:10,value:e.value?e.value:"",variant:e.edit?"outlined":"standard",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},disabled:!e.edit,onChange:e.onChange})},h=function(e){var t=c();return Object(a.jsx)(s.a,{id:"customer-to",label:"To",value:e.value?e.value:"",multiline:!0,className:t.fullWidth,rows:4,rowsMax:10,variant:e.edit?"outlined":"standard",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},disabled:!e.edit,onChange:e.onChange})},j=function(e){var t=c(),n={classes:{root:t.identifierRoot}};return e.allowEdit||(n.readOnly=!0),Object(a.jsx)(s.a,{error:!e.value,variant:e.edit?"outlined":"standard",helperText:e.value?"":e.label+" Required",label:e.label,value:e.value?e.value:"",InputProps:n,fullWidth:!0,onChange:e.onChange,InputLabelProps:{classes:{root:t.labelIdRoot,focused:t.labelFocused},shrink:!0}})},f=function(e){var t=c();return Object(a.jsx)(s.a,{label:"Mesh",value:e.value?e.value:" ",variant:e.edit?"outlined":"standard",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},className:t.fullWidth,disabled:!e.edit,onChange:e.onChange})},m=function(e){var t=c();return Object(a.jsx)(s.a,{label:"BlueTooth",variant:e.edit?"outlined":"standard",value:e.value?e.value:"",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},className:t.fullWidth,disabled:!e.edit,onChange:e.onChange})},x=function(e){var t=c();return Object(a.jsx)(s.a,{label:"Version",variant:e.edit?"outlined":"standard",value:e.value?e.value:"",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},className:t.fullWidth,disabled:!e.edit,onChange:e.onChange})},g=function(e){var t=c();return Object(a.jsx)(s.a,{label:"Notes",value:e.value?e.value:"",variant:e.edit?"outlined":"standard",onChange:e.onChange,multiline:!0,rows:e.rows?e.rows:4,rowsMax:e.rowsMax?e.rowsMax:10,InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0}})},O=function(e){var t=c();return Object(a.jsx)(s.a,{label:e.label,InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},value:e.value,variant:e.edit?"outlined":"standard",onChange:e.onChange})},v=function(e){var t=c();return Object(a.jsx)(s.a,{InputProps:{classes:{root:t.textFieldRoot},inputProps:{min:0},disableUnderline:!e.edit},InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},value:e.value,onChange:e.onChange,id:"Quantity",label:"Quantity",type:"number",variant:e.edit?"outlined":"standard"})},R=function(e){var t=c();return Object(a.jsx)(o.a,{id:"serial",options:e.serials,getOptionLabel:function(e){return String(e.serialNumber)},onChange:e.onChange,value:e.value,freeSolo:!0,renderInput:function(n){return Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({label:"Serial Number",variant:e.edit?"outlined":"standard"},n),{},{InputProps:l(n,t,e),InputLabelProps:Object(r.a)(Object(r.a)({},n.InputLabelProps),{},{classes:{root:t.labelRoot},shrink:!0})}))}})},C=function(e){var t=c();return Object(a.jsx)(o.a,{id:"order",options:e.orders,getOptionLabel:function(e){return e.orderNumber?String(e.orderNumber):""},onChange:e.onChange,value:e.value?e.value:{orderNumber:null},disabled:!e.edit,freeSolo:!0,renderInput:function(n){return Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({label:"Order Number",variant:e.edit?"outlined":"standard"},n),{},{InputProps:l(n,t,e),InputLabelProps:Object(r.a)(Object(r.a)({},n.InputLabelProps),{},{classes:{root:t.labelRoot},shrink:!0})}))}})},M=function(e){var t=c();return Object(a.jsx)(o.a,{id:"rma",options:e.rmas,getOptionLabel:function(e){return e.RMANumber?String(e.RMANumber):""},onChange:e.onChange,value:e.value?e.value:{RMANumber:null},disabled:!e.edit,freeSolo:!0,renderInput:function(n){return Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({label:"RMA Number",variant:e.edit?"outlined":"standard"},n),{},{InputProps:l(n,t,e),InputLabelProps:Object(r.a)(Object(r.a)({},n.InputLabelProps),{},{classes:{root:t.labelRoot},shrink:!0})}))}})},N=function(e){var t=c();return Object(a.jsx)(s.a,{label:"Tracking Number",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},value:e.value?e.value:"",variant:e.edit?"outlined":"standard",onChange:e.onChange,disabled:!e.edit})},I=function(e){var t=c();return Object(a.jsx)(s.a,{label:"PO Number",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},value:e.value?e.value:" ",variant:e.edit?"outlined":"standard",onChange:e.onChange,disabled:!e.edit})},S=function(e){var t=c();return Object(a.jsx)(o.a,{id:"shipping",options:e.options,getOptionLabel:function(e){return e},onChange:e.onChange,value:e.value?e.value:"",disabled:!e.edit,freeSolo:!0,renderInput:function(n){return Object(a.jsx)(s.a,Object(r.a)(Object(r.a)({label:"Shipping Service",variant:e.edit?"outlined":"standard"},n),{},{InputProps:l(n,t,e),InputLabelProps:Object(r.a)(Object(r.a)({},n.InputLabelProps),{},{classes:{root:t.labelRoot},shrink:!0})}))}})},w=function(e){var t=c();return Object(a.jsx)(s.a,{label:"Box Number",InputProps:l(null,t,e),InputLabelProps:{classes:{root:t.labelRoot},shrink:!0},value:e.value,variant:"standard",disabled:!0})}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"g",(function(){return M})),n.d(t,"f",(function(){return N})),n.d(t,"b",(function(){return I})),n.d(t,"d",(function(){return S})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return k}));var a=n(1),r=n(64),s=n(262),o=n(263),i=n(259),c=n(261),l=n(264),u=n(258),d=n(73),p=n(61),b=n(260),h=n(62),j=n(131),f=n(166),m=n.n(f),x=n(165),g=n.n(x),O=n(0),v=n.n(O),R=Object(p.a)({root:{width:"100%"},container:{overflowX:"hidden",display:"flex",flexDirection:"column",width:"100%",alignSelf:"center",height:"auto",overflowY:"hidden"},repairTable:{display:"flex",flexDirection:"column",width:"100%",alignSelf:"left",height:"100%",overflowY:"hidden",marginBottom:15},tableHead:{backgroundColor:"#36435c",color:"white"},repairHead:{backgroundColor:"#1769aa",color:"white"},expandedElement:{display:"flex",flexDirection:"column",alignItems:"flex-start",maxHeight:600,overflowY:"scroll",gap:5,margin:"5px 15px 20px 15px"},row:{"& > *":{borderBottom:"unset"}}}),C=function(e){var t=R(),n=v.a.useState(!1),s=Object(r.a)(n,2),o=s[0],c=s[1];return Object(a.jsxs)(v.a.Fragment,{children:[Object(a.jsxs)(u.a,{className:t.row,children:[e.items.map((function(e,t){return Object(a.jsx)(i.a,{align:0===t?"left":"center",children:e},t)})),Object(a.jsx)(i.a,{children:Object(a.jsx)(j.a,{"aria-label":"expand row",size:"small",onClick:function(){return c(!o)},children:o?Object(a.jsx)(g.a,{}):Object(a.jsx)(m.a,{})})})]}),Object(a.jsx)(u.a,{children:Object(a.jsx)(i.a,{colSpan:e.items.length+1,align:"center",style:{padding:"0px 0px 0px 0px"},children:Object(a.jsx)(b.a,{in:o,timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(h.a,{className:t.expandedElement,children:e.subItems})})})})]})},M=function(e){R();return Object(a.jsx)(u.a,{children:e.items.map((function(e,t){return Object(a.jsx)(i.a,{align:0===t?"left":"center",children:e},t)}))})},N=function(e){var t=R();return Object(a.jsx)(c.a,{className:t.repairTable,component:d.a,children:Object(a.jsx)(s.a,{children:Object(a.jsx)(o.a,{children:e.rows})})})};function I(e){var t=R();return Object(a.jsx)(c.a,{component:d.a,className:t.container,elevation:2,children:Object(a.jsx)(s.a,{stickyHeader:!0,children:e.children})})}function S(e){var t=R();return Object(a.jsx)(l.a,{children:Object(a.jsx)(u.a,{children:v.a.Children.map(e.children,(function(e,n){return Object(a.jsx)(i.a,{align:0===n?"left":"center",className:t.tableHead,children:e},n)}))})})}function w(e){return Object(a.jsx)(o.a,{children:e.children})}function k(e){return Object(a.jsx)(u.a,{children:v.a.Children.map(e.children,(function(e,t){return Object(a.jsx)(i.a,{align:0===t?"left":"center",children:e},t)}))})}t.h=function(e){var t=R();return Object(a.jsx)(c.a,{component:d.a,className:t.container,elevation:2,children:Object(a.jsxs)(s.a,{stickyHeader:!0,children:[Object(a.jsx)(l.a,{children:Object(a.jsx)(u.a,{children:e.tableHead.map((function(e,n){return Object(a.jsx)(i.a,{align:0===n?"left":"center",className:t.tableHead,children:Object(a.jsx)("b",{children:e})},n)}))})}),Object(a.jsx)(o.a,{children:e.rows})]})})}},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(1),r=n(17),s=(n(0),n(61)),o=n(285),i=n(275),c=n(159),l=n(49),u=Object(s.a)((function(){return{search:{flexGrow:1,display:"flex",flexDirection:"row",width:"100%",height:"auto",borderBottom:"1px solid #E0E0E0",paddingBottom:20,marginBottom:15},searchBarContainer:{display:"flex",alignItems:"center",justifyContent:"center",gap:3,marginTop:15},in:{fontSize:20}}})),d=function(e){return Object(a.jsx)(i.a,{id:"combo-box-demo",onChange:e.onChange,options:e.options,ListboxProps:{style:{maxHeight:"25rem"}},style:{width:"100%",alignSelf:"center"},getOptionLabel:e.getOptionLabel,renderInput:function(t){return Object(a.jsx)(o.a,Object(r.a)(Object(r.a)({},t),{},{variant:"outlined",InputProps:Object(r.a)(Object(r.a)({},t.InputProps),{},{classes:{root:e.className}})}))}})},p=function(e){var t=u();return Object(a.jsx)("div",{className:t.search,children:Object(a.jsxs)(l.b,{variant:"h5",children:[e.label,Object(a.jsxs)("div",{className:t.searchBarContainer,children:[Object(a.jsx)(d,{className:t.in,onChange:e.onChange,options:e.options,getOptionLabel:e.getOptionLabel}),!e.noNew&&Object(a.jsx)(c.d,{title:"New",onClick:e.newOrderFunction})]})]})})}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(17),r=n(1),s=n(45),o=n(46),i=n(48),c=n(47),l=n(0),u=n.n(l),d=n(61),p=n(159),b=n(73),h=Object(d.a)((function(){return{rootConatiner:{display:"flex",flexDirection:"column",gap:10,padding:"10px 30px 30px 30px",borderRadius:1,marginTop:15},edit:{display:"flex",flexDirection:"row-reverse"},editButton:{fontSize:10,display:"flex",flexDirection:"column"},content:{gap:20,display:"flex",flexFlow:"wrap",position:"relative",alignItems:"center",maxWidth:800},item:{display:"flex",alignSelf:"stretch",paddingTop:7,paddingBottom:7},id:{width:"100%",paddingBottom:17}}})),j=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).changeEdit=function(){var e=a.state.edit?"inherit":"primary";a.setState({edit:!a.state.edit,color:e})},a.saveChanges=function(e){a.changeEdit(),a.props.updateHead(e)},a.state={edit:!1,color:"inherit"},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state,a=(n.edit,n.color);return Object(r.jsxs)(b.a,{className:t.rootConatiner,elevation:2,children:[this.props.edit&&Object(r.jsx)("div",{className:t.edit,children:Object(r.jsx)(p.b,{onClick:this.changeEdit,className:t.editButton,color:a})}),!this.props.edit&&Object(r.jsx)("div",{style:{paddingTop:20}}),Object(r.jsx)("div",{className:t.id,children:this.props.children[0]}),Object(r.jsxs)("div",{className:t.content,children:[u.a.Children.map(this.props.children,(function(n,a){var s;if(a>0)return s=n.props.noEdit?u.a.cloneElement(n,{edit:!1}):e.props.edit?u.a.cloneElement(n,{edit:e.state.edit}):u.a.cloneElement(n,{edit:!0}),Object(r.jsx)("div",{className:t.item,children:s},a)})),Object(r.jsx)("div",{style:{marginLeft:"auto",marginTop:20},children:this.props.edit&&this.props.change&&Object(r.jsx)(p.f,{onClick:this.saveChanges})})]})]})}}]),n}(u.a.Component);function f(e){var t=h();return Object(r.jsx)(j,Object(a.a)({classes:t},e))}},279:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var a=n(1),r=n(11),s=n.n(r),o=n(21),i=n(39),c=n(45),l=n(46),u=n(48),d=n(47),p=n(0),b=n.n(p),h=n(167),j=n(26),f=n(168),m=n(102),x=n(32),g=n(163),O=n(161),v=n(159),R=n(155),C=n(49),M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).setNote=function(e,t){a.setState((function(n){var a=n.tests;return a[t].notes=e.target.value,a}))},a.setPassed=function(e,t){a.setState((function(n){var a=n.tests;return a[e].passed=t,a}))},a.updateSerialTest=Object(o.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={action:"Tested",note:"",orderNumber:null,RMANumber:a.props.rmaNumber,passed:null},n=0;case 2:if(!(n<a.state.tests.length)){e.next=13;break}if(0!=a.state.tests[n].passed){e.next=9;break}return t.passed=!1,t.note=a.state.tests[n].notes,e.abrupt("break",13);case 9:t.passed=a.state.tests[n].passed;case 10:n++,e.next=2;break;case 13:r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},fetch("/api/serials/addHistory/"+a.props.serialNumber,r).then((function(e){if(e.ok)return e.json();e.json().then((function(e){return a.props.updateMessage({error:!0,text:e.message})}))})).catch((function(e){a.props.updateMessage({error:!0,text:e.message})}));case 15:case"end":return e.stop()}}),e)}))),a.updateTests=function(){var e={itemId:a.props.itemId,tests:a.state.tests},t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};a.props.serialNumber&&a.updateSerialTest(),fetch("/api/rmas/updateTests/"+a.props.rmaNumber,t).then((function(e){if(e.ok)return e.json();e.json().then((function(e){return a.props.updateMessage({error:!0,text:e.message})}))})).then((function(e){e&&a.props.updateMessage({error:!1,text:"Test succesfully updated"})})).catch((function(e){return a.props.updateMessage({error:!0,text:e.message})}))},a.state={tests:null},a.moduleParts=["Radio","Bluetooth","SD Card","Membrane","Board"],a.lightParts=["Green","White","Blue","Amber","Red"],a.touchScreenParts=["Power","Touchscreen","Stylus Pen","Display"],a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({tests:this.props.tests})}},{key:"componentDidUpdate",value:function(e){e!=this.props&&this.setState({tests:this.props.tests})}},{key:"render",value:function(){var e=this,t=this.state.tests;return Object(a.jsxs)(b.a.Fragment,{children:[Object(a.jsx)(C.b,{children:"Parts Test"}),t&&Object(a.jsx)(g.f,{rows:t.map((function(t,n){return Object(a.jsx)(g.g,{items:[Object(a.jsx)("b",{children:t.part}),Object(a.jsx)(v.e,{passed:t.passed,i:n,onChange:e.setPassed}),Object(a.jsx)(O.h,{value:t.notes,onChange:function(t){return e.setNote(t,n)},rows:1,rowsMax:2})]},n)}))}),!this.props.new&&Object(a.jsx)(R.a,{variant:"contained",style:{margin:20},color:"primary",onClick:this.updateTests,children:"Update Tests"})]})}}]),n}(b.a.Component),N=n(72),I=n(17),S=n(73),w=n(61),k=Object(w.a)((function(){return{root:{display:"flex",gap:10,flexGrow:1,padding:"30px 30px 30px 30px",marginTop:15,marginBottom:40}}})),A=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).setSerial=function(e,t){t?fetch("/api/serials/"+t.serialNumber).then((function(e){if(e.ok)return e.json();console.log("Failed network request")})).then((function(e){var t=e?a.props.products.find((function(t){return t.productId===e.productId})):null;a.setState({serial:e,product:t})})).catch((function(e){return console.log(e)})):a.setState({serial:null})},a.setProduct=function(e,t){a.setState({serial:null,product:t})},a.addItem=function(){var e=a.state,t=e.product,n=e.serial;if(t||n){var r=[];"53060-10"===t.productId?a.touchScreenParts.map((function(e){return r.push({passed:null,part:e,notes:""})})):a.moduleParts.map((function(e){return r.push({passed:null,part:e,notes:""})})),a.props.addItem({product:t,serialNumber:n?n.serialNumber:null,mesh:n?n.mesh:null,issue:"",tests:r})}},a.state={product:null,serial:null},a.moduleParts=["Radio","Bluetooth","SD Card","Membrane","Board"],a.lightParts=["Green","White","Blue","Amber","Red"],a.touchScreenParts=["Power","Touchscreen","Stylus Pen","Display"],a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.serial,n=e.product,r=this.props,s=r.classes,o=r.products,i=r.serials;return Object(a.jsxs)(S.a,{elevation:2,className:s.root,children:[Object(a.jsx)(O.n,{value:t,serials:i,onChange:this.setSerial,edit:!0}),Object(a.jsx)(O.k,{value:n,products:o,onChange:this.setProduct,edit:!0}),Object(a.jsx)(v.d,{title:"Add",onClick:this.addItem})]})}}]),n}(b.a.Component);function P(e){var t=k();return Object(a.jsx)(A,Object(I.a)({classes:t},e))}var y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).createRMA=function(){var e=r.state,t=e.RMANumber,n=e.customer,a=e.RMADate,s=e.items,o=e.shipTo,i=e.to;if(t&&n&&a){var c={RMANumber:t,customerId:n._id,items:s,RMADate:a,shipTo:o,to:i},l={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)};fetch("/api/rmas/create",l).then((function(e){if(e.ok)return e.json();e.json().then((function(e){return r.setState({message:{error:!0,text:e.message}})}))})).then((function(e){e&&(r.itemsToRows(e.items,e.RMANumber),r.props.updateRoot({RMANumber:e.RMANumber,customer:n}),r.setState({items:e.items,customer:n,RMADate:new Date(e.RMADate),to:e.to,shipTo:e.shipTo,newRMA:!1,change:!1}))})).catch((function(e){return r.setState({message:{error:!0,text:"Failed to submit rma"}})}))}else r.setState({message:{error:!0,text:"Required Fields - RMANumber - Customer - Date"}})},r.updateRMADetails=function(){var e=r.state,t=e.to,n=e.shipTo,a=e.customer,s=e.RMADate,o=e.RMANumber,i={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,shipTo:n,customerId:a._id,RMADate:s})};fetch("/api/rmas/updateDetails/"+o,i).then((function(e){if(e.ok)return r.setState({message:{error:!1,text:"RMA successfully updated"},change:!1});e.json().then((function(e){return r.setState({message:{error:!0,text:e.message}})}))})).catch((function(e){return r.setState({message:{error:!0,text:e.message}})}))},r.fetchRecent=function(){fetch("/api/rmas/recent/10").then((function(e){if(e.ok)return e.json();e.json().then((function(e){return r.setState({message:{error:!0,text:e.message}})}))})).then((function(e){e&&r.setState({recentRMAs:e,RMANumber:null,items:null,newRMA:!1})})).catch((function(e){return r.setState({message:{error:!0,text:e.message}})}))},r.fetchRMA=function(e){fetch("/api/rmas/"+e).then((function(e){if(e.ok)return e.json();e.json().then((function(e){return r.setState({message:{error:!0,text:e.message}})}))})).then((function(e){e&&(r.itemsToRows(e.items,e.RMANumber),r.setState({RMANumber:e.RMANumber,customer:r.props.customers.find((function(t){return t._id===e.customerId})),RMADate:new Date(e.RMADate),to:e.to,shipTo:e.shipTo,items:e.items,newRMA:!1}))})).catch((function(e){return r.setState({message:{error:!0,text:e.message}})}))},r.setRMA=function(e,t){t?r.fetchRMA(t.RMANumber):r.fetchRecent()},r.change_RMANumber=function(e){var t=parseInt(e.target.value);Number.isInteger(t)?r.setState({RMANumber:parseInt(t)}):r.setState({RMANUmber:null})},r.change_RMATo=function(e){r.setState({to:e.target.value,change:!0})},r.change_RMAShipTo=function(e){r.setState({shipTo:e.target.value,change:!0})},r.change_RMADate=function(e){r.setState({RMADateA:new Date(e.target.value),change:!0})},r.change_RMACustomer=function(e,t){r.setState({customer:t,change:!0})},r.addItem=function(e){var t={productId:e.product.productId,tests:e.tests,serialNumber:e.serialNumber,issue:e.issue};r.setState((function(e){var n=[].concat(Object(i.a)(e.items),[t]);return r.itemsToRows(n,e.RMANumber),{items:n}}))},r.newRMA=function(){r.setState({RMANumber:null,RMADate:new Date,items:[],rows:null,customer:null,to:null,shipTo:null,newRMA:!0})},r.getOptionLabel=function(e){return e.RMANumber+" - "+e.customer.customerName},r.itemsToRows=function(){var e=Object(o.a)(s.a.mark((function e(t,n){var o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],t&&t.length){e.next=3;break}return e.abrupt("return");case 3:i=s.a.mark((function e(i){var c,l,u,d,p,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=void 0,l=void 0,!t[i].serialNumber){e.next=19;break}return e.next=5,fetch("/api/serials/"+t[i].serialNumber).catch((function(e){return r.setState({message:{error:!0,text:e.message}})}));case 5:if(!(u=e.sent).ok){e.next=13;break}return e.next=9,u.json();case 9:c=e.sent,l=r.props.products.find((function(e){return e.productId===c.productId})),e.next=17;break;case 13:return e.next=15,u.json();case 15:d=e.sent,r.setState({message:{error:!0,text:d.message}});case 17:e.next=20;break;case 19:l=r.props.products.find((function(e){return e.productId===t[i].productId}));case 20:p=Object(a.jsx)(M,{new:r.state.newRMA,tests:t[i].tests,itemId:t[i]._id,serialNumber:t[i].serialNumber?t[i].serialNumber:null,rmaNumber:n,updateMessage:function(e){return r.setState({message:e})}}),b=[t[i].serialNumber,l.productName,l.productId,c?c.mesh:"",t[i].issue],o.push(Object(a.jsx)(g.a,{items:b,subItems:[p]},i));case 23:case"end":return e.stop()}}),e)})),c=0;case 5:if(!(c<t.length)){e.next=10;break}return e.delegateYield(i(c),"t0",7);case 7:c++,e.next=5;break;case 10:r.setState({rows:o});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.state={to:null,shipTo:null,RMADate:null,items:null,customer:null,RMANumber:null,newRMA:!1,message:null,change:!1,rows:null,recentRMAs:null},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.state;e?e.RMANumber&&this.fetchRMA(e.RMANumber):this.fetchRecent()}},{key:"render",value:function(){var e=this,t=this.state,n=t.recentRMAs,r=t.RMANumber,s=t.newRMA,o=t.change,i=t.RMADate,c=t.to,l=t.shipTo,u=t.customer,d=t.message,p=t.items,b=t.rows,C=this.props,M=C.customers,I=C.products,S=C.serials,w=C.rmas;return Object(a.jsxs)(j.a,{children:[Object(a.jsx)(h.a,{label:"RMAs",options:w,getOptionLabel:this.getOptionLabel,newOrderFunction:this.newRMA,onChange:this.setRMA}),d&&Object(a.jsx)(m.a,{error:d.error,text:d.text,clear:function(){return e.setState({message:null})}}),n&&!r&&!s&&Object(a.jsxs)(j.c,{children:[Object(a.jsx)(N.a,{variant:"h5",children:"Recent RMAs"}),Object(a.jsx)(x.a,{children:n.map((function(t,n){var r=M.find((function(e){return e._id===t.customerId})),s=new Date(t.RMADate);return Object(a.jsx)(R.a,{style:{textTransform:"none"},onClick:function(){return e.fetchRMA(t.RMANumber)},children:Object(a.jsx)(x.b,{children:["RMANumber "+t.RMANumber,r.customerName,s.getMonth()+"/"+s.getDay()+"/"+s.getFullYear()]})})}))})]}),(s||r)&&Object(a.jsxs)(j.c,{children:[Object(a.jsx)(N.a,{variant:"h5",children:"RMA Details"}),Object(a.jsxs)(f.a,{edit:!s,change:o,updateHead:this.updateRMADetails,children:[Object(a.jsx)(O.f,{label:"RMA Number",value:r,onChange:this.change_RMANumber,allowEdit:s}),Object(a.jsx)(O.c,{customers:M,value:u,onChange:this.change_RMACustomer}),Object(a.jsx)(O.d,{label:"Date Created",value:i,onChange:this.change_RMADate}),Object(a.jsx)(O.q,{value:c,onChange:this.change_RMATo}),Object(a.jsx)(O.o,{value:l,onChange:this.change_RMAShipTo})]})]}),s&&Object(a.jsxs)(j.c,{children:[Object(a.jsx)(N.a,{variant:"h5",children:"New Item"}),Object(a.jsx)(P,{serials:S,products:I,addItem:this.addItem})]}),p&&b&&Object(a.jsxs)(j.c,{children:[Object(a.jsx)(N.a,{variant:"h5",children:"RMA Items"}),Object(a.jsxs)(g.b,{children:[Object(a.jsxs)(g.d,{children:[Object(a.jsx)("b",{children:"Serial Number"}),Object(a.jsx)("b",{children:"Product Name"}),Object(a.jsx)("b",{children:"Product Id"}),Object(a.jsx)("b",{children:"Mesh"}),Object(a.jsx)("b",{children:"Issue"}),Object(a.jsx)("b",{})]}),Object(a.jsx)(g.c,{children:b})]})]}),s&&Object(a.jsx)(v.g,{onClick:this.createRMA,children:"Submit"})]})}}]),n}(b.a.Component)}}]);
//# sourceMappingURL=12.ee2bc0bd.chunk.js.map