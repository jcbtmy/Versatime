(this["webpackJsonpversa-time"]=this["webpackJsonpversa-time"]||[]).push([[13],{268:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return O}));var a=s(1),r=s(11),n=s.n(r),o=s(21),l=s(45),c=s(46),i=s(48),u=s(47),d=s(73),h=s(62),m=s(285),p=s(72),f=s(155),j=s(276),b=s(252),w=s(253),x=s(254),g=s(102),v=s(0),O=function(e){Object(i.a)(s,e);var t=Object(u.a)(s);function s(e){var a;return Object(l.a)(this,s),(a=t.call(this,e)).setRole=function(e){a.setState({role:e})},a.setUsername=function(e){a.setState({username:e.target.value})},a.setPassword=function(e){a.setState({password:e.target.value})},a.setConfirmPassword=function(e){a.setState({confirmPassword:e.target.value})},a.submit=Object(o.a)(n.a.mark((function e(){var t,s,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.username&&a.state.password&&null!==a.state.role&&a.state.password===a.state.confirmPassword){e.next=2;break}return e.abrupt("return");case 2:console.log(a.state.password),t=window.sjcl,s=t.hash.sha256.hash(a.state.password),r=t.codec.hex.fromBits(s),console.log(r),fetch("/user/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,password:r,role:a.state.role})}).then((function(e){e.ok?a.setState({username:null,password:null,role:null,confirmPassword:null,message:{error:!1,text:a.state.username+" succesfully created"}}):e.json().then((function(e){return a.setState({message:{error:!0,text:e.msg}})}))})).catch((function(e){alert(e.message)}));case 8:case"end":return e.stop()}}),e)}))),a.state={username:null,password:null,confirmPassword:null,role:null,messsage:null},a}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=this.state,s=t.username,r=t.password,n=t.confirmPassword,o=t.role,l=t.message;return Object(a.jsx)(h.a,{mx:"auto",style:{marginTop:"25vh"},children:Object(a.jsx)(d.a,{elevation:2,children:Object(a.jsxs)(h.a,{p:6,display:"flex",flexDirection:"column",style:{gap:23},children:[Object(a.jsx)(p.a,{variant:"h6",children:"Add User"}),l&&Object(a.jsx)(g.a,{error:l.error,text:l.text,clear:function(){return e.setState({message:null})}}),Object(a.jsx)(m.a,{error:!s,label:"Username",value:s||"",onChange:this.setUsername,helperText:s?"":"Please enter a username",variant:"outlined",autoComplete:"off",style:{width:300},InputLabelProps:{shrink:!0}}),Object(a.jsx)(m.a,{error:!r,label:"Password",onChange:this.setPassword,value:r||"",helperText:r?"":"Please enter a password",variant:"outlined",type:"password",autoComplete:"off",style:{width:300},InputLabelProps:{shrink:!0}}),Object(a.jsx)(m.a,{error:n!==r||!n,value:n||"",onChange:this.setConfirmPassword,label:"Confirm Password",helperText:n===r&&n?"":"passwords dont match",variant:"outlined",type:"password",autoComplete:"off",style:{width:300},InputLabelProps:{shrink:!0}}),Object(a.jsx)(b.a,{component:"fieldset",style:{marginLeft:"auto",marginRight:"auto"},children:Object(a.jsxs)(w.a,{row:!0,children:[Object(a.jsx)(x.a,{control:Object(a.jsx)(j.a,{checked:0===o,onChange:function(){return e.setRole(0)}}),label:"Admin"}),Object(a.jsx)(x.a,{control:Object(a.jsx)(j.a,{checked:1===o,onChange:function(){return e.setRole(1)}}),label:"User"})]})}),Object(a.jsx)(f.a,{variant:"contained",color:"primary",onClick:this.submit,children:"Submit"})]})})})}}]),s}(s.n(v).a.Component)}}]);
//# sourceMappingURL=13.75a6acbc.chunk.js.map